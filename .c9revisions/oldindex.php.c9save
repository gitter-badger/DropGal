{"ts":1366002427565,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE html>\n<?php\n\t\t\trequire_once(\"config.php\");\n\n\t\t\t$file = fopen(\"https://dl.dropbox.com/u/$userid/$folder_name/dir.txt\", \"r\") or exit(\"Unable to open file!\");\n\t\t\t//$file = fopen(\"dir.txt\", \"r\") or exit(\"Unable to open file!\");\n\t\t\t//Open directory listing generated with batch script\n\t\t\t$cur_file = '';\n\t\t\t//Read each line of the directory listing\n\t\t\t$json_list = '';\n\t\t\t$cur_pair = '';\n\n\t\t\t$categories = array();\n\t\t\t$collection = array();\n\t\t\t$item = array('category' => '', 'name' => '', 'url' => '');\n\t\t\t\n\n\t\t\twhile (!feof($file)) {\n\t\t\t\t//get next line\n\t\t\t\t$cur_file = fgets($file);\n\t\t\t\t//replace windows '\\' with unix '/'\n\t\t\t\t$cur_file = str_replace(\"\\\\\", \"/\", $cur_file);\n\t\t\t\t//and spaces with the correspondent htmlentity\n\t\t\t\t$cur_file = str_replace(\" \", \"%20\", $cur_file);\n\t\t\t\t//remove windows CRLF\n\t\t\t\t$cur_file = preg_replace(\"/[^[:alnum:][:punct:]]/\", \"\", $cur_file);\n\t\t\t\t//drop everything in the path before $folder_name\n\t\t\t\t$cur_file = strstr($cur_file, $folder_name . '/');\n\t\t\t\t//drop the folder name\n\t\t\t\t$cur_file = str_replace($folder_name . '/', '', $cur_file);\n\t\t\t\t\n\t\t\t\t$cur_pair = explode('/', $cur_file);\n\t\t\t\tif (count($cur_pair) > 2) \n\t\t\t\t\t;\n\t\t\t\telseif (count($cur_pair) == 1) {\n\t\t\t\t\t$item['category'] = 'Home';\n\t\t\t\t\t$item['name'] = $cur_pair[0];\n\t\t\t\t\t\n\t\t\t\t\t\n\n\t\t\t\t} else {\n\t\t\t\t\t$item['category'] = str_replace(\"%20\", \"_\", $cur_pair[0]);\n\t\t\t\t\t$item['name'] = $cur_pair[1];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$item['url'] = $cur_file;\n\t\t\t\tif (!in_array($item['category'], $categories)) $categories[] = $item['category'];\n\t\t\t\t$collection[] = $item;\n\n\t\t\t\t//echo \"<img src='https://dl.dropbox.com/u/$userid/\" . $cur_file . \"' style='height: 200px; padding: 5px' onMouseOver=\\\"this.style.cssText='height: 500px'\\\" onMouseOut=\\\"this.style.cssText='height: 200px'\\\" />&nbsp;\";\n\t\t\t}\n\t\t\t//echo json_encode($categories);\n\t\t\tfclose($file);\n\t\t\t?>\n\n<html>\n\t<head>\n\t\t<title>Autofolio</title>\n\t\t<script src=\"http://code.jquery.com/jquery-1.8.3.min.js\"></script>\n\t\t<!--<script src=\"jquery.js\"></script>-->\n\t\t<script type=\"text/javascript\">\n\t\t $(document).ready(function(){\n\t\t \t<?php\n\t\t \t\n\t\t \tforeach ($categories as $cat) {\n\t\t \t\techo \"\\$('.\".$cat.\"').hide();\\n\";\n\t\t \t}\n\t\t \t\n\t\t \techo \"\\$('.\".$categories[0].\"').show();\\n\";\n\t\t \t?>\t\n\n\t\t \t/*$('img').hover(function () { $(this).css('height', 250);}, function () { $(this).css('height', 200);});*/\n\t\t});\n\n\n\t\tfunction showCategory() {\n\n\t\t\t<?php\n\t\t \tforeach ($categories as $cat) {\n\t\t \t\techo \"\\$('.\".$cat.\"').hide();\\n\";\n\t\t \t}\n\t\t \t?>\t\n\n\t\t \t<?php\n\t\t \tforeach ($categories as $cat) {\n\t\t \t\techo \"if(document.getElementById('\".$cat.\"').checked) {\\$('.\".$cat.\"').show(); }\\n\";\n\t\t \t}\n\n\t\t \t?>\t\n\n\t\t}\n\n\t</script>\n\t<style type=\"text/css\">\n\t\tbody {\n\t \t\tcolor: #e2a540;\n\t\t\tbackground: #222222\n\t\t}\n\t\ta:link, a:visited, a:hover, a:active {\n\t\t\tcolor: #f3b651;\n\t\t\ttext-decoration: none;\n\t\t\n\t\t}\n\t</style>\n\t</head>\n\t<body>\n\t\t<h1 style=\"color: #e2a540; border-bottom: solid 1px #e2a540\"><a href=\"http://lisandrolorea.com.ar/blog\"><?= $yourname ?>\n\t\t- Portfolio</a></h1>\n\t\t<form action=\"\">\n\n\t\t<?php\n\t\t foreach ($categories as $i) {\n\t\t\t\n\t\t\tif ($i == 'Home') {\n\t\t\t\techo \"<input type='radio' name='categoria' id='$i' onChange='showCategory();' value='$i' checked='checked' />$i</input>\";\n\t\t\t}\n\t\t\telse echo \"<input type='radio' name='categoria' id='$i' onChange='showCategory();' value='$i' />$i</input>\";\n\t\t}\n\n\t\t?>\n\t\t<span><a href=\"http://lisandrolorea.com.ar/blog\"> --  &laquo;Volver al Sitio&raquo;</a></span>\n\t\t</form>\n\t\t<div>\n\t\t\t\n\t\t\t<?php\n\t\t\tforeach ($collection as $item) {\n\t\t\t\techo \"<img src='https://dl.dropbox.com/u/$userid/$folder_name/\" . $item['url'] . \"' style='height: 375px; padding: 5px' class='\" . $item['category'] . \"' />&nbsp;\";\t\t\t\t\n\t\t\t}\n\t\t\t\n\n\t\t\t?>\n\t\t</div>\n\t\t<a href=\"https://github.com/noidexe/autogal\"><img style=\"position: absolute; top: 0; right: 0; border: 0;\" src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png\" alt=\"Fork me on GitHub\"></a>\n<address>Powered by <a href=\"https://github.com/noidexe/autogal\">Autofolio(alpha)</a> by Lisandro Lorea</address> \n\t</body>\n\t\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":4032}]],"length":4032}
